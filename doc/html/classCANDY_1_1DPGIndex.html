<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANDY: CANDY::DPGIndex Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANDY
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">An indexing library for online vector management</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classCANDY_1_1DPGIndex.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classCANDY_1_1DPGIndex-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CANDY::DPGIndex Class Reference<div class="ingroups"><a class="el" href="group__CANDY__lib.html">The main body of CANDY's indexing approaches</a> &raquo; <a class="el" href="group__CANDY__lib__container.html">The upper tier of indexing alorithms, can be container of other indexing ways</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A hierarchical algorithm based on a data structure consistent with <a class="el" href="classCANDY_1_1NNDescentIndex.html" title="An index whose core algorithm is only used for offline construction, but based on its main data struc...">NNDescentIndex</a>, the subgraph in the hierarchical graph will retain half of the most directional diversity of edges in the original graph, and expand the unidirectional edges into bidirectional edges. The offline construction of the basic graph still uses the NNDescent algorithm in this implementation.  
 <a href="classCANDY_1_1DPGIndex.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="DPGIndex_8h_source.html">CANDY/DPGIndex.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CANDY::DPGIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classCANDY_1_1DPGIndex__inherit__graph.png" border="0" usemap="#aCANDY_1_1DPGIndex_inherit__map" alt="Inheritance graph"/></div>
<map name="aCANDY_1_1DPGIndex_inherit__map" id="aCANDY_1_1DPGIndex_inherit__map">
<area shape="rect" title="A hierarchical algorithm based on a data structure consistent with NNDescentIndex,..." alt="" coords="18,80,157,107"/>
<area shape="rect" href="classCANDY_1_1AbstractIndex.html" title="The abstract class of an index approach." alt="" coords="5,5,169,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CANDY::DPGIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classCANDY_1_1DPGIndex__coll__graph.png" border="0" usemap="#aCANDY_1_1DPGIndex_coll__map" alt="Collaboration graph"/></div>
<map name="aCANDY_1_1DPGIndex_coll__map" id="aCANDY_1_1DPGIndex_coll__map">
<area shape="rect" title="A hierarchical algorithm based on a data structure consistent with NNDescentIndex,..." alt="" coords="575,228,713,255"/>
<area shape="rect" href="classCANDY_1_1AbstractIndex.html" title="The abstract class of an index approach." alt="" coords="253,119,417,145"/>
<area shape="rect" title=" " alt="" coords="19,63,85,89"/>
<area shape="rect" title=" " alt="" coords="27,128,77,155"/>
<area shape="rect" title=" " alt="" coords="5,179,99,205"/>
<area shape="rect" title=" " alt="" coords="301,169,368,196"/>
<area shape="rect" title=" " alt="" coords="237,221,432,262"/>
<area shape="rect" title=" " alt="" coords="237,286,432,327"/>
<area shape="rect" title=" " alt="" coords="243,352,426,379"/>
<area shape="rect" title=" " alt="" coords="247,403,423,429"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCANDY_1_1DPGIndex_1_1Neighbor.html">Neighbor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCANDY_1_1DPGIndex_1_1NhoodLayer0.html">NhoodLayer0</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structCANDY_1_1DPGIndex_1_1NhoodLayer1.html">NhoodLayer1</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8766dc410054270ef009a1a952b37409"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a8766dc410054270ef009a1a952b37409">loadInitialTensor</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:a8766dc410054270ef009a1a952b37409"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base, use this BEFORE <a class="el" href="classCANDY_1_1DPGIndex.html#ae11b068932f5620e797e26c5f0ea857e">insertTensor</a>  <a href="classCANDY_1_1DPGIndex.html#a8766dc410054270ef009a1a952b37409">More...</a><br /></td></tr>
<tr class="separator:a8766dc410054270ef009a1a952b37409"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c2b6b4b7c1be0e11130026587a6c5e"><td class="memItemLeft" align="right" valign="top"><a id="a42c2b6b4b7c1be0e11130026587a6c5e"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a42c2b6b4b7c1be0e11130026587a6c5e">reset</a> ()</td></tr>
<tr class="memdesc:a42c2b6b4b7c1be0e11130026587a6c5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset this index to inited status <br /></td></tr>
<tr class="separator:a42c2b6b4b7c1be0e11130026587a6c5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa089de0ae6e391a85d1e198717b337cb"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#aa089de0ae6e391a85d1e198717b337cb">setConfig</a> (<a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a> cfg)</td></tr>
<tr class="memdesc:aa089de0ae6e391a85d1e198717b337cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the index-specfic config related to one index  <a href="classCANDY_1_1DPGIndex.html#aa089de0ae6e391a85d1e198717b337cb">More...</a><br /></td></tr>
<tr class="separator:aa089de0ae6e391a85d1e198717b337cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11b068932f5620e797e26c5f0ea857e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#ae11b068932f5620e797e26c5f0ea857e">insertTensor</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:ae11b068932f5620e797e26c5f0ea857e"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a tensor  <a href="classCANDY_1_1DPGIndex.html#ae11b068932f5620e797e26c5f0ea857e">More...</a><br /></td></tr>
<tr class="separator:ae11b068932f5620e797e26c5f0ea857e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a162c3345f30e536a72ad3766fbade5b1"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a162c3345f30e536a72ad3766fbade5b1">deleteTensor</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a162c3345f30e536a72ad3766fbade5b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete a tensor  <a href="classCANDY_1_1DPGIndex.html#a162c3345f30e536a72ad3766fbade5b1">More...</a><br /></td></tr>
<tr class="separator:a162c3345f30e536a72ad3766fbade5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b1b2990adf2ddc9e44609c4106af94"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a68b1b2990adf2ddc9e44609c4106af94">reviseTensor</a> (torch::Tensor &amp;t, torch::Tensor &amp;w)</td></tr>
<tr class="memdesc:a68b1b2990adf2ddc9e44609c4106af94"><td class="mdescLeft">&#160;</td><td class="mdescRight">revise a tensor  <a href="classCANDY_1_1DPGIndex.html#a68b1b2990adf2ddc9e44609c4106af94">More...</a><br /></td></tr>
<tr class="separator:a68b1b2990adf2ddc9e44609c4106af94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5925c0c54ff3eef28ad06a8b193bdb6"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#ac5925c0c54ff3eef28ad06a8b193bdb6">getTensorByIndex</a> (std::vector&lt; faiss::idx_t &gt; &amp;idx, int64_t k)</td></tr>
<tr class="memdesc:ac5925c0c54ff3eef28ad06a8b193bdb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a vector of tensors according to some index  <a href="classCANDY_1_1DPGIndex.html#ac5925c0c54ff3eef28ad06a8b193bdb6">More...</a><br /></td></tr>
<tr class="separator:ac5925c0c54ff3eef28ad06a8b193bdb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f789dbfd1be6ab6ae01b3395804f64"><td class="memItemLeft" align="right" valign="top">virtual torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a17f789dbfd1be6ab6ae01b3395804f64">rawData</a> ()</td></tr>
<tr class="memdesc:a17f789dbfd1be6ab6ae01b3395804f64"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the rawData of tensor  <a href="classCANDY_1_1DPGIndex.html#a17f789dbfd1be6ab6ae01b3395804f64">More...</a><br /></td></tr>
<tr class="separator:a17f789dbfd1be6ab6ae01b3395804f64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4419cf5d60e25a6006b6ae114d18500b"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a4419cf5d60e25a6006b6ae114d18500b">searchTensor</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a4419cf5d60e25a6006b6ae114d18500b"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the result tensors  <a href="classCANDY_1_1DPGIndex.html#a4419cf5d60e25a6006b6ae114d18500b">More...</a><br /></td></tr>
<tr class="separator:a4419cf5d60e25a6006b6ae114d18500b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add25332ff97a0969aafc0188d636fc7c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#add25332ff97a0969aafc0188d636fc7c">startHPC</a> ()</td></tr>
<tr class="memdesc:add25332ff97a0969aafc0188d636fc7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">some extra set-ups if the index has HPC fetures  <a href="classCANDY_1_1DPGIndex.html#add25332ff97a0969aafc0188d636fc7c">More...</a><br /></td></tr>
<tr class="separator:add25332ff97a0969aafc0188d636fc7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebed4bc748d8d81ee1b5a1f9b7e94dc4"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#aebed4bc748d8d81ee1b5a1f9b7e94dc4">endHPC</a> ()</td></tr>
<tr class="memdesc:aebed4bc748d8d81ee1b5a1f9b7e94dc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">some extra termination if the index has HPC fetures  <a href="classCANDY_1_1DPGIndex.html#aebed4bc748d8d81ee1b5a1f9b7e94dc4">More...</a><br /></td></tr>
<tr class="separator:aebed4bc748d8d81ee1b5a1f9b7e94dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52f4b2299ccb9f24015635abeaba01c3"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a52f4b2299ccb9f24015635abeaba01c3">setFrozenLevel</a> (int64_t frozenLv)</td></tr>
<tr class="memdesc:a52f4b2299ccb9f24015635abeaba01c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the frozen level of online updating internal state  <a href="classCANDY_1_1DPGIndex.html#a52f4b2299ccb9f24015635abeaba01c3">More...</a><br /></td></tr>
<tr class="separator:a52f4b2299ccb9f24015635abeaba01c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb7b1be42c46e82a9161afe89937f9c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1DPGIndex.html#a7cb7b1be42c46e82a9161afe89937f9c">offlineBuild</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:a7cb7b1be42c46e82a9161afe89937f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">offline build phase  <a href="classCANDY_1_1DPGIndex.html#a7cb7b1be42c46e82a9161afe89937f9c">More...</a><br /></td></tr>
<tr class="separator:a7cb7b1be42c46e82a9161afe89937f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#adb877802c4123c92ada3731717e0910c">setTier</a> (int64_t tie)</td></tr>
<tr class="memdesc:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the tier of this indexing, 0 refers the entry indexing  <a href="classCANDY_1_1AbstractIndex.html#adb877802c4123c92ada3731717e0910c">More...</a><br /></td></tr>
<tr class="separator:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7a9b926f9d966e20bc4eec6db41f400f">setConfigClass</a> (<a class="el" href="classINTELLI_1_1ConfigMap.html">INTELLI::ConfigMap</a> cfg)</td></tr>
<tr class="memdesc:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the index-specific config related to one index  <a href="classCANDY_1_1AbstractIndex.html#a7a9b926f9d966e20bc4eec6db41f400f">More...</a><br /></td></tr>
<tr class="separator:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; faiss::idx_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a60e0f58c72ffbf47342b4c4b4091a573">searchIndex</a> (torch::Tensor q, int64_t k)</td></tr>
<tr class="memdesc:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return their index  <a href="classCANDY_1_1AbstractIndex.html#a60e0f58c72ffbf47342b4c4b4091a573">More...</a><br /></td></tr>
<tr class="separator:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a06bf1c698d6c4fa8ac899e69b83837f1">waitPendingOperations</a> ()</td></tr>
<tr class="memdesc:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">a busy waiting for all pending operations to be done  <a href="classCANDY_1_1AbstractIndex.html#a06bf1c698d6c4fa8ac899e69b83837f1">More...</a><br /></td></tr>
<tr class="separator:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2184c1380f1d9f6516b174beec06eda9">loadInitialStringObject</a> (torch::Tensor &amp;t, std::vector&lt; std::string &gt; &amp;strs)</td></tr>
<tr class="memdesc:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base along with its string objects, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a2184c1380f1d9f6516b174beec06eda9">More...</a><br /></td></tr>
<tr class="separator:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a9d8dd3c2a29fcf75ac05b9e2d21fe2eb">loadInitialU64Object</a> (torch::Tensor &amp;t, std::vector&lt; uint64_t &gt; &amp;u64s)</td></tr>
<tr class="memdesc:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base along with its string objects, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a9d8dd3c2a29fcf75ac05b9e2d21fe2eb">More...</a><br /></td></tr>
<tr class="separator:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a9946053cdb6b0a6c8723b7404d63499d">insertStringObject</a> (torch::Tensor &amp;t, std::vector&lt; std::string &gt; &amp;strs)</td></tr>
<tr class="memdesc:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a string object  <a href="classCANDY_1_1AbstractIndex.html#a9946053cdb6b0a6c8723b7404d63499d">More...</a><br /></td></tr>
<tr class="separator:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a234a3546ece87e1ded2b1c1ac15a25fb">insertU64Object</a> (torch::Tensor &amp;t, std::vector&lt; uint64_t &gt; &amp;u64s)</td></tr>
<tr class="memdesc:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a u64 object  <a href="classCANDY_1_1AbstractIndex.html#a234a3546ece87e1ded2b1c1ac15a25fb">More...</a><br /></td></tr>
<tr class="separator:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a409739ea60c38ce4a68f0aa04c44f38d">deleteStringObject</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete tensor along with its corresponding string object  <a href="classCANDY_1_1AbstractIndex.html#a409739ea60c38ce4a68f0aa04c44f38d">More...</a><br /></td></tr>
<tr class="separator:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7b1bfef1a65faa9a8a7546553243d91d">deleteU64Object</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete tensor along with its corresponding U64 object  <a href="classCANDY_1_1AbstractIndex.html#a7b1bfef1a65faa9a8a7546553243d91d">More...</a><br /></td></tr>
<tr class="separator:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2d641c1ab983db0c3def862d6045ca6b">searchStringObject</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked string objects  <a href="classCANDY_1_1AbstractIndex.html#a2d641c1ab983db0c3def862d6045ca6b">More...</a><br /></td></tr>
<tr class="separator:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::vector&lt; uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a411261089c34e182f3d65360c4fe453a">searchU64Object</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked U64 objects  <a href="classCANDY_1_1AbstractIndex.html#a411261089c34e182f3d65360c4fe453a">More...</a><br /></td></tr>
<tr class="separator:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::tuple&lt; std::vector&lt; torch::Tensor &gt;, std::vector&lt; std::vector&lt; std::string &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#af9c6596f497da56d887fec3ab4daa5f7">searchTensorAndStringObject</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked string objects and original tensors  <a href="classCANDY_1_1AbstractIndex.html#af9c6596f497da56d887fec3ab4daa5f7">More...</a><br /></td></tr>
<tr class="separator:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b33be0f70010fdb579f47cac3f59f95 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7b33be0f70010fdb579f47cac3f59f95">loadInitialTensorAndQueryDistribution</a> (torch::Tensor &amp;t, torch::Tensor &amp;query)</td></tr>
<tr class="memdesc:a7b33be0f70010fdb579f47cac3f59f95 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors and query distributions of a data base, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a7b33be0f70010fdb579f47cac3f59f95">More...</a><br /></td></tr>
<tr class="separator:a7b33be0f70010fdb579f47cac3f59f95 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#aec0bc1f94db6b9f06fe3a468bd165e57">resetIndexStatistics</a> (void)</td></tr>
<tr class="memdesc:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to reset the internal statistics of this index  <a href="classCANDY_1_1AbstractIndex.html#aec0bc1f94db6b9f06fe3a468bd165e57">More...</a><br /></td></tr>
<tr class="separator:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a0624d816994337eda6e99130f0ed5ce2">getIndexStatistics</a> (void)</td></tr>
<tr class="memdesc:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to get the internal statistics of this index  <a href="classCANDY_1_1AbstractIndex.html#a0624d816994337eda6e99130f0ed5ce2">More...</a><br /></td></tr>
<tr class="separator:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2dc77ad4d015d1b6c6badf1b34ba9f4d"><td class="memItemLeft" align="right" valign="top"><a id="a2dc77ad4d015d1b6c6badf1b34ba9f4d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nnDescent</b> ()</td></tr>
<tr class="separator:a2dc77ad4d015d1b6c6badf1b34ba9f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49c2dca2dc613fbacc8db0ff2cec292"><td class="memItemLeft" align="right" valign="top"><a id="ac49c2dca2dc613fbacc8db0ff2cec292"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>randomSample</b> (std::mt19937 &amp;rng, std::vector&lt; size_t &gt; &amp;vec, size_t n, size_t sampledCount)</td></tr>
<tr class="separator:ac49c2dca2dc613fbacc8db0ff2cec292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ae752efb2d75020923f13bdf79b074"><td class="memItemLeft" align="right" valign="top"><a id="ac3ae752efb2d75020923f13bdf79b074"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>updateLayer0Neighbor</b> (size_t i, size_t j, double dist)</td></tr>
<tr class="separator:ac3ae752efb2d75020923f13bdf79b074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb520be9bf2e664b53b1cb581962d5b"><td class="memItemLeft" align="right" valign="top"><a id="adfb520be9bf2e664b53b1cb581962d5b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>addLayer1Neighbor</b> (size_t i, size_t j)</td></tr>
<tr class="separator:adfb520be9bf2e664b53b1cb581962d5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa11635e117222b60c44062f35d335f0f"><td class="memItemLeft" align="right" valign="top"><a id="aa11635e117222b60c44062f35d335f0f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>removeLayer1Neighbor</b> (size_t i, size_t j)</td></tr>
<tr class="separator:aa11635e117222b60c44062f35d335f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ce41aea0e23cfeb6ab1db21817f916a"><td class="memItemLeft" align="right" valign="top"><a id="a3ce41aea0e23cfeb6ab1db21817f916a"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>calcDist</b> (const torch::Tensor &amp;ta, const torch::Tensor &amp;tb)</td></tr>
<tr class="separator:a3ce41aea0e23cfeb6ab1db21817f916a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a67caf13444506a2939429a587f41c0"><td class="memItemLeft" align="right" valign="top"><a id="a1a67caf13444506a2939429a587f41c0"></a>
torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>searchOnce</b> (torch::Tensor q, int64_t k)</td></tr>
<tr class="separator:a1a67caf13444506a2939429a587f41c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c760379aa5596d09d4c9f18bd7ace9"><td class="memItemLeft" align="right" valign="top"><a id="a99c760379aa5596d09d4c9f18bd7ace9"></a>
std::vector&lt; std::pair&lt; double, size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>searchOnceInner</b> (torch::Tensor q, int64_t k)</td></tr>
<tr class="separator:a99c760379aa5596d09d4c9f18bd7ace9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1001f53de1912c51431e66e5a896bc3"><td class="memItemLeft" align="right" valign="top"><a id="ae1001f53de1912c51431e66e5a896bc3"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>insertOnce</b> (vector&lt; std::pair&lt; double, size_t &gt;&gt; &amp;neighbors, torch::Tensor t)</td></tr>
<tr class="separator:ae1001f53de1912c51431e66e5a896bc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a619976f74d62b0071092b5fe13347398"><td class="memItemLeft" align="right" valign="top"><a id="a619976f74d62b0071092b5fe13347398"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>deleteOnce</b> (torch::Tensor t, int64_t k)</td></tr>
<tr class="separator:a619976f74d62b0071092b5fe13347398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8721b2c98e2ea0229ece59dccdd7f524"><td class="memItemLeft" align="right" valign="top"><a id="a8721b2c98e2ea0229ece59dccdd7f524"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>parallelFor</b> (size_t idxSize, std::function&lt; void(size_t)&gt; action)</td></tr>
<tr class="separator:a8721b2c98e2ea0229ece59dccdd7f524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4da920af73b8ef307e621915b3ce97f"><td class="memItemLeft" align="right" valign="top"><a id="aa4da920af73b8ef307e621915b3ce97f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>buildLayer1</b> (size_t i)</td></tr>
<tr class="separator:aa4da920af73b8ef307e621915b3ce97f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7453bdd571753669c316b8372889c531"><td class="memItemLeft" align="right" valign="top"><a id="a7453bdd571753669c316b8372889c531"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>graphK</b></td></tr>
<tr class="separator:a7453bdd571753669c316b8372889c531"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0f582eacb77eefa37561d8830244f8"><td class="memItemLeft" align="right" valign="top"><a id="aef0f582eacb77eefa37561d8830244f8"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>parallelWorkers</b></td></tr>
<tr class="separator:aef0f582eacb77eefa37561d8830244f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50675c94fe58aa74a1fabb8c68f46b3d"><td class="memItemLeft" align="right" valign="top"><a id="a50675c94fe58aa74a1fabb8c68f46b3d"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>vecDim</b></td></tr>
<tr class="separator:a50675c94fe58aa74a1fabb8c68f46b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a287c234a89f2c8ebcbd4a3dcc6edd3a5"><td class="memItemLeft" align="right" valign="top"><a id="a287c234a89f2c8ebcbd4a3dcc6edd3a5"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>frozenLevel</b></td></tr>
<tr class="separator:a287c234a89f2c8ebcbd4a3dcc6edd3a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da22e99084ead6d73b4ba185dc605b5"><td class="memItemLeft" align="right" valign="top"><a id="a4da22e99084ead6d73b4ba185dc605b5"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>rho</b></td></tr>
<tr class="separator:a4da22e99084ead6d73b4ba185dc605b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5445ab19260b3562674137c607c2fa53"><td class="memItemLeft" align="right" valign="top"><a id="a5445ab19260b3562674137c607c2fa53"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>delta</b></td></tr>
<tr class="separator:a5445ab19260b3562674137c607c2fa53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac680600b5d40a7fcf6c0310f1d342a6a"><td class="memItemLeft" align="right" valign="top"><a id="ac680600b5d40a7fcf6c0310f1d342a6a"></a>
std::vector&lt; <a class="el" href="structCANDY_1_1DPGIndex_1_1NhoodLayer0.html">NhoodLayer0</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>graphLayer0</b></td></tr>
<tr class="separator:ac680600b5d40a7fcf6c0310f1d342a6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addbe9227d5ba54d04300cc0bb5150995"><td class="memItemLeft" align="right" valign="top"><a id="addbe9227d5ba54d04300cc0bb5150995"></a>
std::vector&lt; <a class="el" href="structCANDY_1_1DPGIndex_1_1NhoodLayer1.html">NhoodLayer1</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>graphLayer1</b></td></tr>
<tr class="separator:addbe9227d5ba54d04300cc0bb5150995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c62b0ab467dc08e139f360cbc4dae5"><td class="memItemLeft" align="right" valign="top"><a id="ae8c62b0ab467dc08e139f360cbc4dae5"></a>
std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>tensor</b></td></tr>
<tr class="separator:ae8c62b0ab467dc08e139f360cbc4dae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99816665dd642fa2daa93911718f454"><td class="memItemLeft" align="right" valign="top"><a id="ab99816665dd642fa2daa93911718f454"></a>
std::unordered_set&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>deletedIdxSet</b></td></tr>
<tr class="separator:ab99816665dd642fa2daa93911718f454"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:ae91435880ee4b1247e2d3a05e27c8963 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="ae91435880ee4b1247e2d3a05e27c8963"></a>
faiss::MetricType&#160;</td><td class="memItemRight" valign="bottom"><b>faissMetric</b> = faiss::METRIC_L2</td></tr>
<tr class="separator:ae91435880ee4b1247e2d3a05e27c8963 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f85983b76c8c0edf5e580b0add54147 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="a0f85983b76c8c0edf5e580b0add54147"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>containerTier</b> = 0</td></tr>
<tr class="separator:a0f85983b76c8c0edf5e580b0add54147 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:ad9332395f6d88afe7fefdf6b5ba62fe6 inherit pub_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="ad9332395f6d88afe7fefdf6b5ba62fe6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isHPCStarted</b> = false</td></tr>
<tr class="separator:ad9332395f6d88afe7fefdf6b5ba62fe6 inherit pub_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A hierarchical algorithm based on a data structure consistent with <a class="el" href="classCANDY_1_1NNDescentIndex.html" title="An index whose core algorithm is only used for offline construction, but based on its main data struc...">NNDescentIndex</a>, the subgraph in the hierarchical graph will retain half of the most directional diversity of edges in the original graph, and expand the unidirectional edges into bidirectional edges. The offline construction of the basic graph still uses the NNDescent algorithm in this implementation. </p>
<dl class="section note"><dt>Note</dt><dd>special parameters<ul>
<li>parallelWorkers The number of paraller workers, I64, default 1 (set this to less than 0 will use max hardware_concurrency);</li>
<li>vecDim, the dimension of vectors, default 768, I64</li>
<li>graphK, the neighbors of every node in internal data struct, default 20, I64</li>
<li>rho, sample proportion in NNDescent algorithm which takes effect in offline build only (larger is higher accuracy but lower speed), default 1.0, F64</li>
<li>delta, loop termination condition in NNDescent algorithm which takes effect in offline build only (smaller is higher accuracy but lower speed), default 0.01, F64 @warnning Make sure you are using 2D tensors! </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a162c3345f30e536a72ad3766fbade5b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a162c3345f30e536a72ad3766fbade5b1">&#9670;&nbsp;</a></span>deleteTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::deleteTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>k</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>delete a tensor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, some index needs to be single row </td></tr>
    <tr><td class="paramname">k</td><td>the number of nearest neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the deleting is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a56adc37171b02a9e667f10e35c0682d8">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="aebed4bc748d8d81ee1b5a1f9b7e94dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebed4bc748d8d81ee1b5a1f9b7e94dc4">&#9670;&nbsp;</a></span>endHPC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::endHPC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>some extra termination if the index has HPC fetures </p>
<dl class="section return"><dt>Returns</dt><dd>bool whether the HPC termination is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a3c4cdf616320ab7208fc7025b37b9a08">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="ac5925c0c54ff3eef28ad06a8b193bdb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5925c0c54ff3eef28ad06a8b193bdb6">&#9670;&nbsp;</a></span>getTensorByIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; torch::Tensor &gt; CANDY::DPGIndex::getTensorByIndex </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; faiss::idx_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return a vector of tensors according to some index </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idx</td><td>the index, follow faiss's style, allow the KNN index of multiple queries </td></tr>
    <tr><td class="paramname">k</td><td>the returned neighbors, i.e., will be the number of rows of each returned tensor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a vector of tensors, each tensor represent KNN results of one query in idx </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#abed787ede5e68179978545d80e35deec">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="ae11b068932f5620e797e26c5f0ea857e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae11b068932f5620e797e26c5f0ea857e">&#9670;&nbsp;</a></span>insertTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::insertTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>insert a tensor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, some index need to be single row </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the insertion is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a8766dc410054270ef009a1a952b37409"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8766dc410054270ef009a1a952b37409">&#9670;&nbsp;</a></span>loadInitialTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::loadInitialTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load the initial tensors of a data base, use this BEFORE <a class="el" href="classCANDY_1_1DPGIndex.html#ae11b068932f5620e797e26c5f0ea857e">insertTensor</a> </p>
<dl class="section note"><dt>Note</dt><dd>This is majorly an offline function, and may be different from <a class="el" href="classCANDY_1_1DPGIndex.html#ae11b068932f5620e797e26c5f0ea857e">insertTensor</a> for some indexes </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, some index need to be single row </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the loading is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#af801592ccc0813c97a2ff45da40a1312">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a7cb7b1be42c46e82a9161afe89937f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb7b1be42c46e82a9161afe89937f9c">&#9670;&nbsp;</a></span>offlineBuild()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::offlineBuild </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>offline build phase </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor for offline build </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the building is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#aca873d66824f385feac1a7cb49abdfac">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a17f789dbfd1be6ab6ae01b3395804f64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17f789dbfd1be6ab6ae01b3395804f64">&#9670;&nbsp;</a></span>rawData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">torch::Tensor CANDY::DPGIndex::rawData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return the rawData of tensor </p>
<dl class="section return"><dt>Returns</dt><dd>The raw data stored in tensor </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a2e1e1353dec39fc9eab887d97975448e">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a68b1b2990adf2ddc9e44609c4106af94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68b1b2990adf2ddc9e44609c4106af94">&#9670;&nbsp;</a></span>reviseTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::reviseTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>revise a tensor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor to be revised </td></tr>
    <tr><td class="paramname">w</td><td>the revised value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the revising is successful </dd></dl>
<dl class="section note"><dt>Note</dt><dd>only support to delete and insert, no straightforward revision </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a90e72adba27ddcf8c71180f557bb78d5">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a4419cf5d60e25a6006b6ae114d18500b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4419cf5d60e25a6006b6ae114d18500b">&#9670;&nbsp;</a></span>searchTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; torch::Tensor &gt; CANDY::DPGIndex::searchTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>search the k-NN of a query tensor, return the result tensors </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, allow multiple rows </td></tr>
    <tr><td class="paramname">k</td><td>the returned neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;torch::Tensor&gt; the result tensor for each row of query </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a39069fe9cb1f16910695c091b768dbe8">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="aa089de0ae6e391a85d1e198717b337cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa089de0ae6e391a85d1e198717b337cb">&#9670;&nbsp;</a></span>setConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::setConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the index-specfic config related to one index </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>the config of this class </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the configuration is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a01f91296bd41aa55dd6a4c6465cc3a19">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a52f4b2299ccb9f24015635abeaba01c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52f4b2299ccb9f24015635abeaba01c3">&#9670;&nbsp;</a></span>setFrozenLevel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::setFrozenLevel </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>frozenLv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the frozen level of online updating internal state </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frozenLv</td><td>the level of frozen, 0 means freeze any online update in internal state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether the setting is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a637e0a15f3753c2188da92f8b787061d">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="add25332ff97a0969aafc0188d636fc7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add25332ff97a0969aafc0188d636fc7c">&#9670;&nbsp;</a></span>startHPC()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::DPGIndex::startHPC </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>some extra set-ups if the index has HPC fetures </p>
<dl class="section return"><dt>Returns</dt><dd>bool whether the HPC set-up is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#abb4333a11499fc6c88d1d78bc77138f4">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/CANDY/<a class="el" href="DPGIndex_8h_source.html">DPGIndex.h</a></li>
<li>src/CANDY/<a class="el" href="DPGIndex_8cpp.html">DPGIndex.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>CANDY</b></li><li class="navelem"><a class="el" href="classCANDY_1_1DPGIndex.html">DPGIndex</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
