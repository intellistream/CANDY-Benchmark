<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANDY: CANDY::OnlineIVFLSHIndex Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANDY
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">An indexing library for online vector management</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classCANDY_1_1OnlineIVFLSHIndex.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classCANDY_1_1OnlineIVFLSHIndex-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CANDY::OnlineIVFLSHIndex Class Reference<div class="ingroups"><a class="el" href="group__CANDY__lib.html">The main body of CANDY's indexing approaches</a> &raquo; <a class="el" href="group__CANDY__lib__bottom.html">The bottom tier of indexing alorithms</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A LSH indexing, using 2-tier IVF List to manage buckets. The base tier is hamming encoding, implemented under list, the top tier is sampled summarization of hamming encoding, implemented under vector (faster access, harder to change, but less representative). The LSH function is the vanilla random projection (gaussian or random matrix).  
 <a href="classCANDY_1_1OnlineIVFLSHIndex.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="OnlineIVFLSHIndex_8h_source.html">CANDY/OnlineIVFLSHIndex.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CANDY::OnlineIVFLSHIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classCANDY_1_1OnlineIVFLSHIndex__inherit__graph.png" border="0" usemap="#aCANDY_1_1OnlineIVFLSHIndex_inherit__map" alt="Inheritance graph"/></div>
<map name="aCANDY_1_1OnlineIVFLSHIndex_inherit__map" id="aCANDY_1_1OnlineIVFLSHIndex_inherit__map">
<area shape="rect" title="A LSH indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming encoding,..." alt="" coords="5,80,204,107"/>
<area shape="rect" href="classCANDY_1_1OnlineIVFL2HIndex.html" title="A L2H (learning 2 hash) indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming e..." alt="" coords="5,155,204,181"/>
<area shape="rect" href="classCANDY_1_1AbstractIndex.html" title="The abstract class of an index approach." alt="" coords="23,5,187,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CANDY::OnlineIVFLSHIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classCANDY_1_1OnlineIVFLSHIndex__coll__graph.png" border="0" usemap="#aCANDY_1_1OnlineIVFLSHIndex_coll__map" alt="Collaboration graph"/></div>
<map name="aCANDY_1_1OnlineIVFLSHIndex_coll__map" id="aCANDY_1_1OnlineIVFLSHIndex_coll__map">
<area shape="rect" title="A LSH indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming encoding,..." alt="" coords="736,304,935,331"/>
<area shape="rect" href="classCANDY_1_1AbstractIndex.html" title="The abstract class of an index approach." alt="" coords="390,177,554,204"/>
<area shape="rect" title=" " alt="" coords="81,97,148,124"/>
<area shape="rect" title=" " alt="" coords="89,231,140,257"/>
<area shape="rect" href="classCANDY_1_1IVFTensorEncodingList.html" title="The inverted file (IVF) list to organize tensor and its encodings." alt="" coords="363,253,581,280"/>
<area shape="rect" title=" " alt="" coords="68,163,161,189"/>
<area shape="rect" title=" " alt="" coords="439,304,505,331"/>
<area shape="rect" title=" " alt="" coords="85,299,145,325"/>
<area shape="rect" title=" " alt="" coords="5,350,224,391"/>
<area shape="rect" title=" " alt="" coords="377,355,567,381"/>
<area shape="rect" title=" " alt="" coords="443,405,501,432"/>
<area shape="rect" title=" " alt="" coords="440,463,504,489"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4133d15b9370b5988071c161e4615da2"><td class="memItemLeft" align="right" valign="top"><a id="a4133d15b9370b5988071c161e4615da2"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a4133d15b9370b5988071c161e4615da2">reset</a> ()</td></tr>
<tr class="memdesc:a4133d15b9370b5988071c161e4615da2"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset this index to inited status <br /></td></tr>
<tr class="separator:a4133d15b9370b5988071c161e4615da2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae72ef6def73d5cc1177c4e2ea09ba1b8"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#ae72ef6def73d5cc1177c4e2ea09ba1b8">setConfig</a> (<a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a> cfg)</td></tr>
<tr class="memdesc:ae72ef6def73d5cc1177c4e2ea09ba1b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the index-specific config related to one index  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#ae72ef6def73d5cc1177c4e2ea09ba1b8">More...</a><br /></td></tr>
<tr class="separator:ae72ef6def73d5cc1177c4e2ea09ba1b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70846ac08b2e410fdd87026d251aff16"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:a70846ac08b2e410fdd87026d251aff16"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a tensor  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">More...</a><br /></td></tr>
<tr class="separator:a70846ac08b2e410fdd87026d251aff16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db25199e5ff66fadf61ee644b5e4f0e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a1db25199e5ff66fadf61ee644b5e4f0e">deleteTensor</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a1db25199e5ff66fadf61ee644b5e4f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete a tensor  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a1db25199e5ff66fadf61ee644b5e4f0e">More...</a><br /></td></tr>
<tr class="separator:a1db25199e5ff66fadf61ee644b5e4f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d07faa760fd9c66f09db8bd1f57b332"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a7d07faa760fd9c66f09db8bd1f57b332">reviseTensor</a> (torch::Tensor &amp;t, torch::Tensor &amp;w)</td></tr>
<tr class="memdesc:a7d07faa760fd9c66f09db8bd1f57b332"><td class="mdescLeft">&#160;</td><td class="mdescRight">revise a tensor  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a7d07faa760fd9c66f09db8bd1f57b332">More...</a><br /></td></tr>
<tr class="separator:a7d07faa760fd9c66f09db8bd1f57b332"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0064fa7ee822fde2aa19abda7257a067"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a0064fa7ee822fde2aa19abda7257a067">searchTensor</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a0064fa7ee822fde2aa19abda7257a067"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the result tensors  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a0064fa7ee822fde2aa19abda7257a067">More...</a><br /></td></tr>
<tr class="separator:a0064fa7ee822fde2aa19abda7257a067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#adb877802c4123c92ada3731717e0910c">setTier</a> (int64_t tie)</td></tr>
<tr class="memdesc:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the tier of this indexing, 0 refers the entry indexing  <a href="classCANDY_1_1AbstractIndex.html#adb877802c4123c92ada3731717e0910c">More...</a><br /></td></tr>
<tr class="separator:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7a9b926f9d966e20bc4eec6db41f400f">setConfigClass</a> (<a class="el" href="classINTELLI_1_1ConfigMap.html">INTELLI::ConfigMap</a> cfg)</td></tr>
<tr class="memdesc:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the index-specific config related to one index  <a href="classCANDY_1_1AbstractIndex.html#a7a9b926f9d966e20bc4eec6db41f400f">More...</a><br /></td></tr>
<tr class="separator:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb4333a11499fc6c88d1d78bc77138f4 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#abb4333a11499fc6c88d1d78bc77138f4">startHPC</a> ()</td></tr>
<tr class="memdesc:abb4333a11499fc6c88d1d78bc77138f4 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">some extra set-ups if the index has HPC fetures  <a href="classCANDY_1_1AbstractIndex.html#abb4333a11499fc6c88d1d78bc77138f4">More...</a><br /></td></tr>
<tr class="separator:abb4333a11499fc6c88d1d78bc77138f4 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af801592ccc0813c97a2ff45da40a1312 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#af801592ccc0813c97a2ff45da40a1312">loadInitialTensor</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:af801592ccc0813c97a2ff45da40a1312 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#af801592ccc0813c97a2ff45da40a1312">More...</a><br /></td></tr>
<tr class="separator:af801592ccc0813c97a2ff45da40a1312 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; faiss::idx_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a60e0f58c72ffbf47342b4c4b4091a573">searchIndex</a> (torch::Tensor q, int64_t k)</td></tr>
<tr class="memdesc:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return their index  <a href="classCANDY_1_1AbstractIndex.html#a60e0f58c72ffbf47342b4c4b4091a573">More...</a><br /></td></tr>
<tr class="separator:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed787ede5e68179978545d80e35deec inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#abed787ede5e68179978545d80e35deec">getTensorByIndex</a> (std::vector&lt; faiss::idx_t &gt; &amp;idx, int64_t k)</td></tr>
<tr class="memdesc:abed787ede5e68179978545d80e35deec inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a vector of tensors according to some index  <a href="classCANDY_1_1AbstractIndex.html#abed787ede5e68179978545d80e35deec">More...</a><br /></td></tr>
<tr class="separator:abed787ede5e68179978545d80e35deec inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1e1353dec39fc9eab887d97975448e inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2e1e1353dec39fc9eab887d97975448e">rawData</a> ()</td></tr>
<tr class="memdesc:a2e1e1353dec39fc9eab887d97975448e inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the rawData of tensor  <a href="classCANDY_1_1AbstractIndex.html#a2e1e1353dec39fc9eab887d97975448e">More...</a><br /></td></tr>
<tr class="separator:a2e1e1353dec39fc9eab887d97975448e inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4cdf616320ab7208fc7025b37b9a08 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a3c4cdf616320ab7208fc7025b37b9a08">endHPC</a> ()</td></tr>
<tr class="memdesc:a3c4cdf616320ab7208fc7025b37b9a08 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">some extra termination if the index has HPC features  <a href="classCANDY_1_1AbstractIndex.html#a3c4cdf616320ab7208fc7025b37b9a08">More...</a><br /></td></tr>
<tr class="separator:a3c4cdf616320ab7208fc7025b37b9a08 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637e0a15f3753c2188da92f8b787061d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a637e0a15f3753c2188da92f8b787061d">setFrozenLevel</a> (int64_t frozenLv)</td></tr>
<tr class="memdesc:a637e0a15f3753c2188da92f8b787061d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the frozen level of online updating internal state  <a href="classCANDY_1_1AbstractIndex.html#a637e0a15f3753c2188da92f8b787061d">More...</a><br /></td></tr>
<tr class="separator:a637e0a15f3753c2188da92f8b787061d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca873d66824f385feac1a7cb49abdfac inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#aca873d66824f385feac1a7cb49abdfac">offlineBuild</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:aca873d66824f385feac1a7cb49abdfac inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">offline build phase  <a href="classCANDY_1_1AbstractIndex.html#aca873d66824f385feac1a7cb49abdfac">More...</a><br /></td></tr>
<tr class="separator:aca873d66824f385feac1a7cb49abdfac inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a06bf1c698d6c4fa8ac899e69b83837f1">waitPendingOperations</a> ()</td></tr>
<tr class="memdesc:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">a busy waiting for all pending operations to be done  <a href="classCANDY_1_1AbstractIndex.html#a06bf1c698d6c4fa8ac899e69b83837f1">More...</a><br /></td></tr>
<tr class="separator:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2184c1380f1d9f6516b174beec06eda9">loadInitialStringObject</a> (torch::Tensor &amp;t, std::vector&lt; std::string &gt; &amp;strs)</td></tr>
<tr class="memdesc:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base along with its string objects, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a2184c1380f1d9f6516b174beec06eda9">More...</a><br /></td></tr>
<tr class="separator:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a9d8dd3c2a29fcf75ac05b9e2d21fe2eb">loadInitialU64Object</a> (torch::Tensor &amp;t, std::vector&lt; uint64_t &gt; &amp;u64s)</td></tr>
<tr class="memdesc:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base along with its string objects, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a9d8dd3c2a29fcf75ac05b9e2d21fe2eb">More...</a><br /></td></tr>
<tr class="separator:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a9946053cdb6b0a6c8723b7404d63499d">insertStringObject</a> (torch::Tensor &amp;t, std::vector&lt; std::string &gt; &amp;strs)</td></tr>
<tr class="memdesc:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a string object  <a href="classCANDY_1_1AbstractIndex.html#a9946053cdb6b0a6c8723b7404d63499d">More...</a><br /></td></tr>
<tr class="separator:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a234a3546ece87e1ded2b1c1ac15a25fb">insertU64Object</a> (torch::Tensor &amp;t, std::vector&lt; uint64_t &gt; &amp;u64s)</td></tr>
<tr class="memdesc:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a u64 object  <a href="classCANDY_1_1AbstractIndex.html#a234a3546ece87e1ded2b1c1ac15a25fb">More...</a><br /></td></tr>
<tr class="separator:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a409739ea60c38ce4a68f0aa04c44f38d">deleteStringObject</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete tensor along with its corresponding string object  <a href="classCANDY_1_1AbstractIndex.html#a409739ea60c38ce4a68f0aa04c44f38d">More...</a><br /></td></tr>
<tr class="separator:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7b1bfef1a65faa9a8a7546553243d91d">deleteU64Object</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete tensor along with its corresponding U64 object  <a href="classCANDY_1_1AbstractIndex.html#a7b1bfef1a65faa9a8a7546553243d91d">More...</a><br /></td></tr>
<tr class="separator:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2d641c1ab983db0c3def862d6045ca6b">searchStringObject</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked string objects  <a href="classCANDY_1_1AbstractIndex.html#a2d641c1ab983db0c3def862d6045ca6b">More...</a><br /></td></tr>
<tr class="separator:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::vector&lt; uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a411261089c34e182f3d65360c4fe453a">searchU64Object</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked U64 objects  <a href="classCANDY_1_1AbstractIndex.html#a411261089c34e182f3d65360c4fe453a">More...</a><br /></td></tr>
<tr class="separator:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::tuple&lt; std::vector&lt; torch::Tensor &gt;, std::vector&lt; std::vector&lt; std::string &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#af9c6596f497da56d887fec3ab4daa5f7">searchTensorAndStringObject</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked string objects and original tensors  <a href="classCANDY_1_1AbstractIndex.html#af9c6596f497da56d887fec3ab4daa5f7">More...</a><br /></td></tr>
<tr class="separator:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b33be0f70010fdb579f47cac3f59f95 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7b33be0f70010fdb579f47cac3f59f95">loadInitialTensorAndQueryDistribution</a> (torch::Tensor &amp;t, torch::Tensor &amp;query)</td></tr>
<tr class="memdesc:a7b33be0f70010fdb579f47cac3f59f95 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors and query distributions of a data base, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a7b33be0f70010fdb579f47cac3f59f95">More...</a><br /></td></tr>
<tr class="separator:a7b33be0f70010fdb579f47cac3f59f95 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#aec0bc1f94db6b9f06fe3a468bd165e57">resetIndexStatistics</a> (void)</td></tr>
<tr class="memdesc:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to reset the internal statistics of this index  <a href="classCANDY_1_1AbstractIndex.html#aec0bc1f94db6b9f06fe3a468bd165e57">More...</a><br /></td></tr>
<tr class="separator:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a0624d816994337eda6e99130f0ed5ce2">getIndexStatistics</a> (void)</td></tr>
<tr class="memdesc:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to get the internal statistics of this index  <a href="classCANDY_1_1AbstractIndex.html#a0624d816994337eda6e99130f0ed5ce2">More...</a><br /></td></tr>
<tr class="separator:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a86df6a433dee9b6d3517c8803b86b7a4"><td class="memItemLeft" align="right" valign="top"><a id="a86df6a433dee9b6d3517c8803b86b7a4"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>fvecs2bitvecs</b> (const float *x, uint8_t *b, size_t d, size_t n, float ref)</td></tr>
<tr class="separator:a86df6a433dee9b6d3517c8803b86b7a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6249f743e32e6b0b052a105e586cde72"><td class="memItemLeft" align="right" valign="top"><a id="a6249f743e32e6b0b052a105e586cde72"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>fvec2bitvec</b> (const float *x, uint8_t *b, size_t d, float ref)</td></tr>
<tr class="separator:a6249f743e32e6b0b052a105e586cde72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2829c09cdf4b4c282ab0a77c4d7252ec"><td class="memItemLeft" align="right" valign="top">static torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a2829c09cdf4b4c282ab0a77c4d7252ec">crsAmm</a> (torch::Tensor &amp;A, torch::Tensor &amp;B, torch::Tensor &amp;indices)</td></tr>
<tr class="memdesc:a2829c09cdf4b4c282ab0a77c4d7252ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">thw column row sampling to compute approximate matrix multiplication  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a2829c09cdf4b4c282ab0a77c4d7252ec">More...</a><br /></td></tr>
<tr class="separator:a2829c09cdf4b4c282ab0a77c4d7252ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a84b7c77c1344cab3e7e359786df5bd28"><td class="memItemLeft" align="right" valign="top"><a id="a84b7c77c1344cab3e7e359786df5bd28"></a>
std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encodeSingleRow</b> (torch::Tensor &amp;tensor, uint64_t *bucket)</td></tr>
<tr class="separator:a84b7c77c1344cab3e7e359786df5bd28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a684396027e78b693c81f22f018859269"><td class="memItemLeft" align="right" valign="top"><a id="a684396027e78b693c81f22f018859269"></a>
virtual torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>randomProjection</b> (torch::Tensor &amp;a)</td></tr>
<tr class="separator:a684396027e78b693c81f22f018859269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944f73286b1f731af33be971c1337719"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a944f73286b1f731af33be971c1337719">deleteRowsInline</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:a944f73286b1f731af33be971c1337719"><td class="mdescLeft">&#160;</td><td class="mdescRight">the inline function of deleting rows  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a944f73286b1f731af33be971c1337719">More...</a><br /></td></tr>
<tr class="separator:a944f73286b1f731af33be971c1337719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af362ff335603fc02080c77a351b1aebf"><td class="memItemLeft" align="right" valign="top"><a id="af362ff335603fc02080c77a351b1aebf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#af362ff335603fc02080c77a351b1aebf">genCrsIndices</a> (void)</td></tr>
<tr class="memdesc:af362ff335603fc02080c77a351b1aebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">to generate the sampling indices of crs <br /></td></tr>
<tr class="separator:af362ff335603fc02080c77a351b1aebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:acd95290af0c1cb056bd1de7a8601edc5"><td class="memItemLeft" align="right" valign="top"><a id="acd95290af0c1cb056bd1de7a8601edc5"></a>
<a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><b>myCfg</b> = nullptr</td></tr>
<tr class="separator:acd95290af0c1cb056bd1de7a8601edc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945f5b1eead5b024df45724cd1c25596"><td class="memItemLeft" align="right" valign="top"><a id="a945f5b1eead5b024df45724cd1c25596"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>vecDim</b> = 0</td></tr>
<tr class="separator:a945f5b1eead5b024df45724cd1c25596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe340451fce5ec21d9521d8889986f66"><td class="memItemLeft" align="right" valign="top"><a id="abe340451fce5ec21d9521d8889986f66"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>numberOfBuckets</b> = 1</td></tr>
<tr class="separator:abe340451fce5ec21d9521d8889986f66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbfdab2b3a39d3530bcac8cbf682093c"><td class="memItemLeft" align="right" valign="top"><a id="adbfdab2b3a39d3530bcac8cbf682093c"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>encodeLen</b> = 1</td></tr>
<tr class="separator:adbfdab2b3a39d3530bcac8cbf682093c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce697b85d7527e46d80782ce64aac78"><td class="memItemLeft" align="right" valign="top"><a id="a9ce697b85d7527e46d80782ce64aac78"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>candidateTimes</b> = 1</td></tr>
<tr class="separator:a9ce697b85d7527e46d80782ce64aac78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b8fdea4581464df7d8459cc8257bf7"><td class="memItemLeft" align="right" valign="top"><a id="a53b8fdea4581464df7d8459cc8257bf7"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>useCRS</b> = 0</td></tr>
<tr class="separator:a53b8fdea4581464df7d8459cc8257bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9e04da2d0fd3921d6bfbd509b42989"><td class="memItemLeft" align="right" valign="top"><a id="adc9e04da2d0fd3921d6bfbd509b42989"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>CRSDim</b> = 1</td></tr>
<tr class="separator:adc9e04da2d0fd3921d6bfbd509b42989"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267f76b53f9dbf707511a971d1d9547c"><td class="memItemLeft" align="right" valign="top"><a id="a267f76b53f9dbf707511a971d1d9547c"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>bucketsLog2</b> = 0</td></tr>
<tr class="separator:a267f76b53f9dbf707511a971d1d9547c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d11aac5ba17a8ed380c35f4099124c"><td class="memItemLeft" align="right" valign="top"><a id="aa8d11aac5ba17a8ed380c35f4099124c"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>redoCRSIndices</b> = 0</td></tr>
<tr class="separator:aa8d11aac5ba17a8ed380c35f4099124c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a668f86543dea66d32655fafc943946ee"><td class="memItemLeft" align="right" valign="top"><a id="a668f86543dea66d32655fafc943946ee"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>lshMatrixType</b> = &quot;gaussian&quot;</td></tr>
<tr class="separator:a668f86543dea66d32655fafc943946ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da7ba020c5d26acbf3654f20eb3aa65"><td class="memItemLeft" align="right" valign="top"><a id="a3da7ba020c5d26acbf3654f20eb3aa65"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>maskReference</b> = 0.5</td></tr>
<tr class="separator:a3da7ba020c5d26acbf3654f20eb3aa65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6e92965d4b2eb9c59d2c418179b777"><td class="memItemLeft" align="right" valign="top"><a id="a1b6e92965d4b2eb9c59d2c418179b777"></a>
<a class="el" href="classCANDY_1_1IVFTensorEncodingList.html">IVFTensorEncodingList</a>&#160;</td><td class="memItemRight" valign="bottom"><b>IVFList</b></td></tr>
<tr class="separator:a1b6e92965d4b2eb9c59d2c418179b777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7977c6e5fe4760f97405d57dbc3fbd1"><td class="memItemLeft" align="right" valign="top"><a id="ab7977c6e5fe4760f97405d57dbc3fbd1"></a>
torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>rotationMatrix</b></td></tr>
<tr class="separator:ab7977c6e5fe4760f97405d57dbc3fbd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267f4177a7ff7e2ee06e73c911f87947"><td class="memItemLeft" align="right" valign="top"><a id="a267f4177a7ff7e2ee06e73c911f87947"></a>
torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>crsIndices</b></td></tr>
<tr class="separator:a267f4177a7ff7e2ee06e73c911f87947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:ae91435880ee4b1247e2d3a05e27c8963 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="ae91435880ee4b1247e2d3a05e27c8963"></a>
faiss::MetricType&#160;</td><td class="memItemRight" valign="bottom"><b>faissMetric</b> = faiss::METRIC_L2</td></tr>
<tr class="separator:ae91435880ee4b1247e2d3a05e27c8963 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f85983b76c8c0edf5e580b0add54147 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="a0f85983b76c8c0edf5e580b0add54147"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>containerTier</b> = 0</td></tr>
<tr class="separator:a0f85983b76c8c0edf5e580b0add54147 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_attribs_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:ad9332395f6d88afe7fefdf6b5ba62fe6 inherit pub_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="ad9332395f6d88afe7fefdf6b5ba62fe6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isHPCStarted</b> = false</td></tr>
<tr class="separator:ad9332395f6d88afe7fefdf6b5ba62fe6 inherit pub_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A LSH indexing, using 2-tier IVF List to manage buckets. The base tier is hamming encoding, implemented under list, the top tier is sampled summarization of hamming encoding, implemented under vector (faster access, harder to change, but less representative). The LSH function is the vanilla random projection (gaussian or random matrix). </p>
<dl class="section note"><dt>Note</dt><dd>currently single thread </dd>
<dd>
using hamming LSH function defined in faiss </dd>
<dd>
config parameters<ul>
<li>vecDim, the dimension of vectors, default 768, I64</li>
<li>candidateTimes, the times of k to determine minimum candidates, default 1 ,I64</li>
<li>numberOfBuckets, the number of first titer buckets, default 1, I64, suggest 2^n</li>
<li>encodeLen, the length of LSH encoding, in bytes, default 1, I64</li>
<li>metricType, the type of AKNN metric, default L2, String</li>
<li>lshMatrixType, the type of lsh matrix, default gaussian, String<ul>
<li>gaussian means a N(0,1) LSH matrix</li>
<li>random means a random matrix where each value ranges from -0.5~0.5</li>
</ul>
</li>
<li>useCRS, whether or not use column row sampling in projecting the vector, 0 (No), I64<ul>
<li>further trade off of accuracy v.s. efficiency</li>
</ul>
</li>
<li>CRSDim, the dimension which are not pruned by crs, 1/10 of vecDim, I64</li>
<li>redoCRSIndices, whether or not re-generate the indices of CRS, 0 (No), I64 </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2829c09cdf4b4c282ab0a77c4d7252ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2829c09cdf4b4c282ab0a77c4d7252ec">&#9670;&nbsp;</a></span>crsAmm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">torch::Tensor CANDY::OnlineIVFLSHIndex::crsAmm </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>A</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>indices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>thw column row sampling to compute approximate matrix multiplication </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>the left side matrix </td></tr>
    <tr><td class="paramname">B</td><td>the right side matrix </td></tr>
    <tr><td class="paramname">idx</td><td>the indices of sampling </td></tr>
    <tr><td class="paramname">_crsDim</td><td>the dimension of preserved dimensions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a944f73286b1f731af33be971c1337719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a944f73286b1f731af33be971c1337719">&#9670;&nbsp;</a></span>deleteRowsInline()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFLSHIndex::deleteRowsInline </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the inline function of deleting rows </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, multiple rows </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the deleting is successful </dd></dl>

</div>
</div>
<a id="a1db25199e5ff66fadf61ee644b5e4f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1db25199e5ff66fadf61ee644b5e4f0e">&#9670;&nbsp;</a></span>deleteTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFLSHIndex::deleteTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>k</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>delete a tensor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, recommend single row </td></tr>
    <tr><td class="paramname">k</td><td>the number of nearest neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the deleting is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a56adc37171b02a9e667f10e35c0682d8">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a70846ac08b2e410fdd87026d251aff16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70846ac08b2e410fdd87026d251aff16">&#9670;&nbsp;</a></span>insertTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFLSHIndex::insertTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>insert a tensor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, accept multiple rows </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the insertion is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a7d07faa760fd9c66f09db8bd1f57b332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d07faa760fd9c66f09db8bd1f57b332">&#9670;&nbsp;</a></span>reviseTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFLSHIndex::reviseTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>w</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>revise a tensor </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor to be revised, recommend single row </td></tr>
    <tr><td class="paramname">w</td><td>the revised value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the revising is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a90e72adba27ddcf8c71180f557bb78d5">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a0064fa7ee822fde2aa19abda7257a067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0064fa7ee822fde2aa19abda7257a067">&#9670;&nbsp;</a></span>searchTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; torch::Tensor &gt; CANDY::OnlineIVFLSHIndex::searchTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>k</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>search the k-NN of a query tensor, return the result tensors </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, allow multiple rows </td></tr>
    <tr><td class="paramname">k</td><td>the returned neighbors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::vector&lt;torch::Tensor&gt; the result tensor for each row of query </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a39069fe9cb1f16910695c091b768dbe8">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="ae72ef6def73d5cc1177c4e2ea09ba1b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae72ef6def73d5cc1177c4e2ea09ba1b8">&#9670;&nbsp;</a></span>setConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFLSHIndex::setConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the index-specific config related to one index </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>the config of this class </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the configuration is successful </dd></dl>
<p>generate the rotation matrix for random projection</p>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a01f91296bd41aa55dd6a4c6465cc3a19">CANDY::AbstractIndex</a>.</p>

<p>Reimplemented in <a class="el" href="classCANDY_1_1OnlineIVFL2HIndex.html#a1ad72dd1c11c05f254ec7ac6198c2852">CANDY::OnlineIVFL2HIndex</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/CANDY/<a class="el" href="OnlineIVFLSHIndex_8h_source.html">OnlineIVFLSHIndex.h</a></li>
<li>src/CANDY/<a class="el" href="OnlineIVFLSHIndex_8cpp.html">OnlineIVFLSHIndex.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>CANDY</b></li><li class="navelem"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html">OnlineIVFLSHIndex</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
