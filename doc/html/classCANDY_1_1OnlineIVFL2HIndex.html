<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANDY: CANDY::OnlineIVFL2HIndex Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANDY
   &#160;<span id="projectnumber">0.2.0</span>
   </div>
   <div id="projectbrief">An indexing library for online vector management</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classCANDY_1_1OnlineIVFL2HIndex.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classCANDY_1_1OnlineIVFL2HIndex-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CANDY::OnlineIVFL2HIndex Class Reference<div class="ingroups"><a class="el" href="group__CANDY__lib.html">The main body of CANDY's indexing approaches</a> &raquo; <a class="el" href="group__CANDY__lib__bottom.html">The bottom tier of indexing alorithms</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A L2H (learning 2 hash) indexing, using 2-tier IVF List to manage buckets. The base tier is hamming encoding, implemented under list, the top tier is sampled summarization of hamming encoding, implemented under vector (faster access, harder to change, but less representative). The L2H function is using ML to approximate spectral hashing principles (NIPS 2008)  
 <a href="classCANDY_1_1OnlineIVFL2HIndex.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="OnlineIVFL2HIndex_8h_source.html">CANDY/OnlineIVFL2HIndex.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CANDY::OnlineIVFL2HIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classCANDY_1_1OnlineIVFL2HIndex__inherit__graph.png" border="0" usemap="#aCANDY_1_1OnlineIVFL2HIndex_inherit__map" alt="Inheritance graph"/></div>
<map name="aCANDY_1_1OnlineIVFL2HIndex_inherit__map" id="aCANDY_1_1OnlineIVFL2HIndex_inherit__map">
<area shape="rect" title="A L2H (learning 2 hash) indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming e..." alt="" coords="5,155,204,181"/>
<area shape="rect" href="classCANDY_1_1OnlineIVFLSHIndex.html" title="A LSH indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming encoding,..." alt="" coords="5,80,204,107"/>
<area shape="rect" href="classCANDY_1_1AbstractIndex.html" title="The abstract class of an index approach." alt="" coords="23,5,187,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CANDY::OnlineIVFL2HIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classCANDY_1_1OnlineIVFL2HIndex__coll__graph.png" border="0" usemap="#aCANDY_1_1OnlineIVFL2HIndex_coll__map" alt="Collaboration graph"/></div>
<map name="aCANDY_1_1OnlineIVFL2HIndex_coll__map" id="aCANDY_1_1OnlineIVFL2HIndex_coll__map">
<area shape="rect" title="A L2H (learning 2 hash) indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming e..." alt="" coords="1071,425,1269,452"/>
<area shape="rect" href="classCANDY_1_1OnlineIVFLSHIndex.html" title="A LSH indexing, using 2&#45;tier IVF List to manage buckets. The base tier is hamming encoding,..." alt="" coords="739,224,937,251"/>
<area shape="rect" href="classCANDY_1_1AbstractIndex.html" title="The abstract class of an index approach." alt="" coords="390,165,554,192"/>
<area shape="rect" href="classCANDY_1_1FlatIndex.html" title="The class of a flat index approach, using brutal force management." alt="" coords="771,425,905,452"/>
<area shape="rect" title=" " alt="" coords="81,424,148,451"/>
<area shape="rect" title=" " alt="" coords="89,136,140,163"/>
<area shape="rect" href="classCANDY_1_1IVFTensorEncodingList.html" title="The inverted file (IVF) list to organize tensor and its encodings." alt="" coords="363,64,581,91"/>
<area shape="rect" title=" " alt="" coords="68,200,161,227"/>
<area shape="rect" title=" " alt="" coords="439,13,505,40"/>
<area shape="rect" title=" " alt="" coords="85,5,145,32"/>
<area shape="rect" title=" " alt="" coords="5,57,224,98"/>
<area shape="rect" title=" " alt="" coords="377,381,567,408"/>
<area shape="rect" title=" " alt="" coords="443,115,501,141"/>
<area shape="rect" title=" " alt="" coords="440,432,504,459"/>
<area shape="rect" title=" " alt="" coords="743,477,933,518"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab24cba33125e368200449cfa4090019c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFL2HIndex.html#ab24cba33125e368200449cfa4090019c">loadInitialTensor</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:ab24cba33125e368200449cfa4090019c"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base, use this BEFORE <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a>  <a href="classCANDY_1_1OnlineIVFL2HIndex.html#ab24cba33125e368200449cfa4090019c">More...</a><br /></td></tr>
<tr class="separator:ab24cba33125e368200449cfa4090019c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad72dd1c11c05f254ec7ac6198c2852"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFL2HIndex.html#a1ad72dd1c11c05f254ec7ac6198c2852">setConfig</a> (<a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a> cfg)</td></tr>
<tr class="memdesc:a1ad72dd1c11c05f254ec7ac6198c2852"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the index-specific config related to one index  <a href="classCANDY_1_1OnlineIVFL2HIndex.html#a1ad72dd1c11c05f254ec7ac6198c2852">More...</a><br /></td></tr>
<tr class="separator:a1ad72dd1c11c05f254ec7ac6198c2852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acde59c6130fd8544e0d6d42beca47eec"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFL2HIndex.html#acde59c6130fd8544e0d6d42beca47eec">loadInitialTensorAndQueryDistribution</a> (torch::Tensor &amp;t, torch::Tensor &amp;query)</td></tr>
<tr class="memdesc:acde59c6130fd8544e0d6d42beca47eec"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors and query distributions of a data base, use this BEFORE <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a>  <a href="classCANDY_1_1OnlineIVFL2HIndex.html#acde59c6130fd8544e0d6d42beca47eec">More...</a><br /></td></tr>
<tr class="separator:acde59c6130fd8544e0d6d42beca47eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCANDY_1_1OnlineIVFLSHIndex')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html">CANDY::OnlineIVFLSHIndex</a></td></tr>
<tr class="memitem:a4133d15b9370b5988071c161e4615da2 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a4133d15b9370b5988071c161e4615da2"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a4133d15b9370b5988071c161e4615da2">reset</a> ()</td></tr>
<tr class="memdesc:a4133d15b9370b5988071c161e4615da2 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">reset this index to inited status <br /></td></tr>
<tr class="separator:a4133d15b9370b5988071c161e4615da2 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70846ac08b2e410fdd87026d251aff16 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:a70846ac08b2e410fdd87026d251aff16 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a tensor  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">More...</a><br /></td></tr>
<tr class="separator:a70846ac08b2e410fdd87026d251aff16 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db25199e5ff66fadf61ee644b5e4f0e inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a1db25199e5ff66fadf61ee644b5e4f0e">deleteTensor</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a1db25199e5ff66fadf61ee644b5e4f0e inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete a tensor  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a1db25199e5ff66fadf61ee644b5e4f0e">More...</a><br /></td></tr>
<tr class="separator:a1db25199e5ff66fadf61ee644b5e4f0e inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d07faa760fd9c66f09db8bd1f57b332 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a7d07faa760fd9c66f09db8bd1f57b332">reviseTensor</a> (torch::Tensor &amp;t, torch::Tensor &amp;w)</td></tr>
<tr class="memdesc:a7d07faa760fd9c66f09db8bd1f57b332 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">revise a tensor  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a7d07faa760fd9c66f09db8bd1f57b332">More...</a><br /></td></tr>
<tr class="separator:a7d07faa760fd9c66f09db8bd1f57b332 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0064fa7ee822fde2aa19abda7257a067 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a0064fa7ee822fde2aa19abda7257a067">searchTensor</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a0064fa7ee822fde2aa19abda7257a067 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the result tensors  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a0064fa7ee822fde2aa19abda7257a067">More...</a><br /></td></tr>
<tr class="separator:a0064fa7ee822fde2aa19abda7257a067 inherit pub_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#adb877802c4123c92ada3731717e0910c">setTier</a> (int64_t tie)</td></tr>
<tr class="memdesc:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the tier of this indexing, 0 refers the entry indexing  <a href="classCANDY_1_1AbstractIndex.html#adb877802c4123c92ada3731717e0910c">More...</a><br /></td></tr>
<tr class="separator:adb877802c4123c92ada3731717e0910c inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7a9b926f9d966e20bc4eec6db41f400f">setConfigClass</a> (<a class="el" href="classINTELLI_1_1ConfigMap.html">INTELLI::ConfigMap</a> cfg)</td></tr>
<tr class="memdesc:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the index-specific config related to one index  <a href="classCANDY_1_1AbstractIndex.html#a7a9b926f9d966e20bc4eec6db41f400f">More...</a><br /></td></tr>
<tr class="separator:a7a9b926f9d966e20bc4eec6db41f400f inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb4333a11499fc6c88d1d78bc77138f4 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#abb4333a11499fc6c88d1d78bc77138f4">startHPC</a> ()</td></tr>
<tr class="memdesc:abb4333a11499fc6c88d1d78bc77138f4 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">some extra set-ups if the index has HPC fetures  <a href="classCANDY_1_1AbstractIndex.html#abb4333a11499fc6c88d1d78bc77138f4">More...</a><br /></td></tr>
<tr class="separator:abb4333a11499fc6c88d1d78bc77138f4 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; faiss::idx_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a60e0f58c72ffbf47342b4c4b4091a573">searchIndex</a> (torch::Tensor q, int64_t k)</td></tr>
<tr class="memdesc:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return their index  <a href="classCANDY_1_1AbstractIndex.html#a60e0f58c72ffbf47342b4c4b4091a573">More...</a><br /></td></tr>
<tr class="separator:a60e0f58c72ffbf47342b4c4b4091a573 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed787ede5e68179978545d80e35deec inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; torch::Tensor &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#abed787ede5e68179978545d80e35deec">getTensorByIndex</a> (std::vector&lt; faiss::idx_t &gt; &amp;idx, int64_t k)</td></tr>
<tr class="memdesc:abed787ede5e68179978545d80e35deec inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a vector of tensors according to some index  <a href="classCANDY_1_1AbstractIndex.html#abed787ede5e68179978545d80e35deec">More...</a><br /></td></tr>
<tr class="separator:abed787ede5e68179978545d80e35deec inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1e1353dec39fc9eab887d97975448e inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2e1e1353dec39fc9eab887d97975448e">rawData</a> ()</td></tr>
<tr class="memdesc:a2e1e1353dec39fc9eab887d97975448e inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">return the rawData of tensor  <a href="classCANDY_1_1AbstractIndex.html#a2e1e1353dec39fc9eab887d97975448e">More...</a><br /></td></tr>
<tr class="separator:a2e1e1353dec39fc9eab887d97975448e inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4cdf616320ab7208fc7025b37b9a08 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a3c4cdf616320ab7208fc7025b37b9a08">endHPC</a> ()</td></tr>
<tr class="memdesc:a3c4cdf616320ab7208fc7025b37b9a08 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">some extra termination if the index has HPC features  <a href="classCANDY_1_1AbstractIndex.html#a3c4cdf616320ab7208fc7025b37b9a08">More...</a><br /></td></tr>
<tr class="separator:a3c4cdf616320ab7208fc7025b37b9a08 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a637e0a15f3753c2188da92f8b787061d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a637e0a15f3753c2188da92f8b787061d">setFrozenLevel</a> (int64_t frozenLv)</td></tr>
<tr class="memdesc:a637e0a15f3753c2188da92f8b787061d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the frozen level of online updating internal state  <a href="classCANDY_1_1AbstractIndex.html#a637e0a15f3753c2188da92f8b787061d">More...</a><br /></td></tr>
<tr class="separator:a637e0a15f3753c2188da92f8b787061d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca873d66824f385feac1a7cb49abdfac inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#aca873d66824f385feac1a7cb49abdfac">offlineBuild</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:aca873d66824f385feac1a7cb49abdfac inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">offline build phase  <a href="classCANDY_1_1AbstractIndex.html#aca873d66824f385feac1a7cb49abdfac">More...</a><br /></td></tr>
<tr class="separator:aca873d66824f385feac1a7cb49abdfac inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a06bf1c698d6c4fa8ac899e69b83837f1">waitPendingOperations</a> ()</td></tr>
<tr class="memdesc:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">a busy waiting for all pending operations to be done  <a href="classCANDY_1_1AbstractIndex.html#a06bf1c698d6c4fa8ac899e69b83837f1">More...</a><br /></td></tr>
<tr class="separator:a06bf1c698d6c4fa8ac899e69b83837f1 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2184c1380f1d9f6516b174beec06eda9">loadInitialStringObject</a> (torch::Tensor &amp;t, std::vector&lt; std::string &gt; &amp;strs)</td></tr>
<tr class="memdesc:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base along with its string objects, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a2184c1380f1d9f6516b174beec06eda9">More...</a><br /></td></tr>
<tr class="separator:a2184c1380f1d9f6516b174beec06eda9 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a9d8dd3c2a29fcf75ac05b9e2d21fe2eb">loadInitialU64Object</a> (torch::Tensor &amp;t, std::vector&lt; uint64_t &gt; &amp;u64s)</td></tr>
<tr class="memdesc:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">load the initial tensors of a data base along with its string objects, use this BEFORE <a class="el" href="classCANDY_1_1AbstractIndex.html#a10e65ecee21528fe6df84114b61110d4">insertTensor</a>  <a href="classCANDY_1_1AbstractIndex.html#a9d8dd3c2a29fcf75ac05b9e2d21fe2eb">More...</a><br /></td></tr>
<tr class="separator:a9d8dd3c2a29fcf75ac05b9e2d21fe2eb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a9946053cdb6b0a6c8723b7404d63499d">insertStringObject</a> (torch::Tensor &amp;t, std::vector&lt; std::string &gt; &amp;strs)</td></tr>
<tr class="memdesc:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a string object  <a href="classCANDY_1_1AbstractIndex.html#a9946053cdb6b0a6c8723b7404d63499d">More...</a><br /></td></tr>
<tr class="separator:a9946053cdb6b0a6c8723b7404d63499d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a234a3546ece87e1ded2b1c1ac15a25fb">insertU64Object</a> (torch::Tensor &amp;t, std::vector&lt; uint64_t &gt; &amp;u64s)</td></tr>
<tr class="memdesc:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">insert a u64 object  <a href="classCANDY_1_1AbstractIndex.html#a234a3546ece87e1ded2b1c1ac15a25fb">More...</a><br /></td></tr>
<tr class="separator:a234a3546ece87e1ded2b1c1ac15a25fb inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a409739ea60c38ce4a68f0aa04c44f38d">deleteStringObject</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete tensor along with its corresponding string object  <a href="classCANDY_1_1AbstractIndex.html#a409739ea60c38ce4a68f0aa04c44f38d">More...</a><br /></td></tr>
<tr class="separator:a409739ea60c38ce4a68f0aa04c44f38d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a7b1bfef1a65faa9a8a7546553243d91d">deleteU64Object</a> (torch::Tensor &amp;t, int64_t k=1)</td></tr>
<tr class="memdesc:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">delete tensor along with its corresponding U64 object  <a href="classCANDY_1_1AbstractIndex.html#a7b1bfef1a65faa9a8a7546553243d91d">More...</a><br /></td></tr>
<tr class="separator:a7b1bfef1a65faa9a8a7546553243d91d inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::vector&lt; std::string &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a2d641c1ab983db0c3def862d6045ca6b">searchStringObject</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked string objects  <a href="classCANDY_1_1AbstractIndex.html#a2d641c1ab983db0c3def862d6045ca6b">More...</a><br /></td></tr>
<tr class="separator:a2d641c1ab983db0c3def862d6045ca6b inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::vector&lt; std::vector&lt; uint64_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a411261089c34e182f3d65360c4fe453a">searchU64Object</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked U64 objects  <a href="classCANDY_1_1AbstractIndex.html#a411261089c34e182f3d65360c4fe453a">More...</a><br /></td></tr>
<tr class="separator:a411261089c34e182f3d65360c4fe453a inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual std::tuple&lt; std::vector&lt; torch::Tensor &gt;, std::vector&lt; std::vector&lt; std::string &gt; &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#af9c6596f497da56d887fec3ab4daa5f7">searchTensorAndStringObject</a> (torch::Tensor &amp;q, int64_t k)</td></tr>
<tr class="memdesc:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">search the k-NN of a query tensor, return the linked string objects and original tensors  <a href="classCANDY_1_1AbstractIndex.html#af9c6596f497da56d887fec3ab4daa5f7">More...</a><br /></td></tr>
<tr class="separator:af9c6596f497da56d887fec3ab4daa5f7 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#aec0bc1f94db6b9f06fe3a468bd165e57">resetIndexStatistics</a> (void)</td></tr>
<tr class="memdesc:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to reset the internal statistics of this index  <a href="classCANDY_1_1AbstractIndex.html#aec0bc1f94db6b9f06fe3a468bd165e57">More...</a><br /></td></tr>
<tr class="separator:aec0bc1f94db6b9f06fe3a468bd165e57 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1AbstractIndex.html#a0624d816994337eda6e99130f0ed5ce2">getIndexStatistics</a> (void)</td></tr>
<tr class="memdesc:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to get the internal statistics of this index  <a href="classCANDY_1_1AbstractIndex.html#a0624d816994337eda6e99130f0ed5ce2">More...</a><br /></td></tr>
<tr class="separator:a0624d816994337eda6e99130f0ed5ce2 inherit pub_methods_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a67d309f3a3c36961dd8cb84442d0b88a"><td class="memItemLeft" align="right" valign="top"><a id="a67d309f3a3c36961dd8cb84442d0b88a"></a>
virtual torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>randomProjection</b> (torch::Tensor &amp;a)</td></tr>
<tr class="separator:a67d309f3a3c36961dd8cb84442d0b88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad559cbb013803dcccb2da202c1766ad9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFL2HIndex.html#ad559cbb013803dcccb2da202c1766ad9">trainModelWithData</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:ad559cbb013803dcccb2da202c1766ad9"><td class="mdescLeft">&#160;</td><td class="mdescRight">self-supervised learning on data, including automatic labeling  <a href="classCANDY_1_1OnlineIVFL2HIndex.html#ad559cbb013803dcccb2da202c1766ad9">More...</a><br /></td></tr>
<tr class="separator:ad559cbb013803dcccb2da202c1766ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classCANDY_1_1OnlineIVFLSHIndex')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html">CANDY::OnlineIVFLSHIndex</a></td></tr>
<tr class="memitem:a84b7c77c1344cab3e7e359786df5bd28 inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a84b7c77c1344cab3e7e359786df5bd28"></a>
std::vector&lt; uint8_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>encodeSingleRow</b> (torch::Tensor &amp;tensor, uint64_t *bucket)</td></tr>
<tr class="separator:a84b7c77c1344cab3e7e359786df5bd28 inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944f73286b1f731af33be971c1337719 inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a944f73286b1f731af33be971c1337719">deleteRowsInline</a> (torch::Tensor &amp;t)</td></tr>
<tr class="memdesc:a944f73286b1f731af33be971c1337719 inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">the inline function of deleting rows  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a944f73286b1f731af33be971c1337719">More...</a><br /></td></tr>
<tr class="separator:a944f73286b1f731af33be971c1337719 inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af362ff335603fc02080c77a351b1aebf inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="af362ff335603fc02080c77a351b1aebf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#af362ff335603fc02080c77a351b1aebf">genCrsIndices</a> (void)</td></tr>
<tr class="memdesc:af362ff335603fc02080c77a351b1aebf inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">to generate the sampling indices of crs <br /></td></tr>
<tr class="separator:af362ff335603fc02080c77a351b1aebf inherit pro_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a26d26fba48ac65b3e61ebe4e1a628810"><td class="memItemLeft" align="right" valign="top"><a id="a26d26fba48ac65b3e61ebe4e1a628810"></a>
<a class="el" href="group__CANDY__lib__bottom__sub.html#ga23606f290228bd2dd6128d494fbc5b45">MLPHashingModelPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><b>myMLModel</b> = nullptr</td></tr>
<tr class="separator:a26d26fba48ac65b3e61ebe4e1a628810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e27e0021ab06f2e40d4953046dffd1"><td class="memItemLeft" align="right" valign="top"><a id="a32e27e0021ab06f2e40d4953046dffd1"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>buildingSamples</b> = -1</td></tr>
<tr class="separator:a32e27e0021ab06f2e40d4953046dffd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea4f455afe0e7bad8c8560594017ae6"><td class="memItemLeft" align="right" valign="top"><a id="a4ea4f455afe0e7bad8c8560594017ae6"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>buildingANNK</b> = 10</td></tr>
<tr class="separator:a4ea4f455afe0e7bad8c8560594017ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71a2db7ea737d7c0f09584397c763c39"><td class="memItemLeft" align="right" valign="top"><a id="a71a2db7ea737d7c0f09584397c763c39"></a>
<a class="el" href="classCANDY_1_1FlatIndex.html">FlatIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><b>trainIndex</b></td></tr>
<tr class="separator:a71a2db7ea737d7c0f09584397c763c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67749d8ef0f845546c8679d4e23dd63d"><td class="memItemLeft" align="right" valign="top"><a id="a67749d8ef0f845546c8679d4e23dd63d"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>positiveSampleRatio</b> = 0.1</td></tr>
<tr class="separator:a67749d8ef0f845546c8679d4e23dd63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCANDY_1_1OnlineIVFLSHIndex')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html">CANDY::OnlineIVFLSHIndex</a></td></tr>
<tr class="memitem:acd95290af0c1cb056bd1de7a8601edc5 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="acd95290af0c1cb056bd1de7a8601edc5"></a>
<a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><b>myCfg</b> = nullptr</td></tr>
<tr class="separator:acd95290af0c1cb056bd1de7a8601edc5 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a945f5b1eead5b024df45724cd1c25596 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a945f5b1eead5b024df45724cd1c25596"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>vecDim</b> = 0</td></tr>
<tr class="separator:a945f5b1eead5b024df45724cd1c25596 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe340451fce5ec21d9521d8889986f66 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="abe340451fce5ec21d9521d8889986f66"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>numberOfBuckets</b> = 1</td></tr>
<tr class="separator:abe340451fce5ec21d9521d8889986f66 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbfdab2b3a39d3530bcac8cbf682093c inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="adbfdab2b3a39d3530bcac8cbf682093c"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>encodeLen</b> = 1</td></tr>
<tr class="separator:adbfdab2b3a39d3530bcac8cbf682093c inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce697b85d7527e46d80782ce64aac78 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a9ce697b85d7527e46d80782ce64aac78"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>candidateTimes</b> = 1</td></tr>
<tr class="separator:a9ce697b85d7527e46d80782ce64aac78 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b8fdea4581464df7d8459cc8257bf7 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a53b8fdea4581464df7d8459cc8257bf7"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>useCRS</b> = 0</td></tr>
<tr class="separator:a53b8fdea4581464df7d8459cc8257bf7 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc9e04da2d0fd3921d6bfbd509b42989 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="adc9e04da2d0fd3921d6bfbd509b42989"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>CRSDim</b> = 1</td></tr>
<tr class="separator:adc9e04da2d0fd3921d6bfbd509b42989 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267f76b53f9dbf707511a971d1d9547c inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a267f76b53f9dbf707511a971d1d9547c"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>bucketsLog2</b> = 0</td></tr>
<tr class="separator:a267f76b53f9dbf707511a971d1d9547c inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8d11aac5ba17a8ed380c35f4099124c inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="aa8d11aac5ba17a8ed380c35f4099124c"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>redoCRSIndices</b> = 0</td></tr>
<tr class="separator:aa8d11aac5ba17a8ed380c35f4099124c inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a668f86543dea66d32655fafc943946ee inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a668f86543dea66d32655fafc943946ee"></a>
std::string&#160;</td><td class="memItemRight" valign="bottom"><b>lshMatrixType</b> = &quot;gaussian&quot;</td></tr>
<tr class="separator:a668f86543dea66d32655fafc943946ee inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da7ba020c5d26acbf3654f20eb3aa65 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a3da7ba020c5d26acbf3654f20eb3aa65"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>maskReference</b> = 0.5</td></tr>
<tr class="separator:a3da7ba020c5d26acbf3654f20eb3aa65 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6e92965d4b2eb9c59d2c418179b777 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a1b6e92965d4b2eb9c59d2c418179b777"></a>
<a class="el" href="classCANDY_1_1IVFTensorEncodingList.html">IVFTensorEncodingList</a>&#160;</td><td class="memItemRight" valign="bottom"><b>IVFList</b></td></tr>
<tr class="separator:a1b6e92965d4b2eb9c59d2c418179b777 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7977c6e5fe4760f97405d57dbc3fbd1 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="ab7977c6e5fe4760f97405d57dbc3fbd1"></a>
torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>rotationMatrix</b></td></tr>
<tr class="separator:ab7977c6e5fe4760f97405d57dbc3fbd1 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a267f4177a7ff7e2ee06e73c911f87947 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a267f4177a7ff7e2ee06e73c911f87947"></a>
torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><b>crsIndices</b></td></tr>
<tr class="separator:a267f4177a7ff7e2ee06e73c911f87947 inherit pro_attribs_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:ae91435880ee4b1247e2d3a05e27c8963 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="ae91435880ee4b1247e2d3a05e27c8963"></a>
faiss::MetricType&#160;</td><td class="memItemRight" valign="bottom"><b>faissMetric</b> = faiss::METRIC_L2</td></tr>
<tr class="separator:ae91435880ee4b1247e2d3a05e27c8963 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f85983b76c8c0edf5e580b0add54147 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="a0f85983b76c8c0edf5e580b0add54147"></a>
int64_t&#160;</td><td class="memItemRight" valign="bottom"><b>containerTier</b> = 0</td></tr>
<tr class="separator:a0f85983b76c8c0edf5e580b0add54147 inherit pro_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html">CANDY::OnlineIVFLSHIndex</a></td></tr>
<tr class="memitem:a86df6a433dee9b6d3517c8803b86b7a4 inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a86df6a433dee9b6d3517c8803b86b7a4"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>fvecs2bitvecs</b> (const float *x, uint8_t *b, size_t d, size_t n, float ref)</td></tr>
<tr class="separator:a86df6a433dee9b6d3517c8803b86b7a4 inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6249f743e32e6b0b052a105e586cde72 inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top"><a id="a6249f743e32e6b0b052a105e586cde72"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>fvec2bitvec</b> (const float *x, uint8_t *b, size_t d, float ref)</td></tr>
<tr class="separator:a6249f743e32e6b0b052a105e586cde72 inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2829c09cdf4b4c282ab0a77c4d7252ec inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memItemLeft" align="right" valign="top">static torch::Tensor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a2829c09cdf4b4c282ab0a77c4d7252ec">crsAmm</a> (torch::Tensor &amp;A, torch::Tensor &amp;B, torch::Tensor &amp;indices)</td></tr>
<tr class="memdesc:a2829c09cdf4b4c282ab0a77c4d7252ec inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="mdescLeft">&#160;</td><td class="mdescRight">thw column row sampling to compute approximate matrix multiplication  <a href="classCANDY_1_1OnlineIVFLSHIndex.html#a2829c09cdf4b4c282ab0a77c4d7252ec">More...</a><br /></td></tr>
<tr class="separator:a2829c09cdf4b4c282ab0a77c4d7252ec inherit pub_static_methods_classCANDY_1_1OnlineIVFLSHIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classCANDY_1_1AbstractIndex"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classCANDY_1_1AbstractIndex')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classCANDY_1_1AbstractIndex.html">CANDY::AbstractIndex</a></td></tr>
<tr class="memitem:ad9332395f6d88afe7fefdf6b5ba62fe6 inherit pub_attribs_classCANDY_1_1AbstractIndex"><td class="memItemLeft" align="right" valign="top"><a id="ad9332395f6d88afe7fefdf6b5ba62fe6"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>isHPCStarted</b> = false</td></tr>
<tr class="separator:ad9332395f6d88afe7fefdf6b5ba62fe6 inherit pub_attribs_classCANDY_1_1AbstractIndex"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A L2H (learning 2 hash) indexing, using 2-tier IVF List to manage buckets. The base tier is hamming encoding, implemented under list, the top tier is sampled summarization of hamming encoding, implemented under vector (faster access, harder to change, but less representative). The L2H function is using ML to approximate spectral hashing principles (NIPS 2008) </p>
<dl class="section note"><dt>Note</dt><dd>currently single thread </dd>
<dd>
using hamming L2H function defined in faiss </dd>
<dd>
config parameters<ul>
<li>vecDim, the dimension of vectors, default 768, I64</li>
<li>candidateTimes, the times of k to determine minimum candidates, default 1 ,I64</li>
<li>numberOfBuckets, the number of first titer buckets, default 1, I64, suggest 2^n</li>
<li>encodeLen, the length of L2H encoding, in bytes, default 1, I64</li>
<li>metricType, the type of AKNN metric, default L2, String</li>
<li>buildingSamples, the number of samples for building internal ML model during initial loading, default -1, I64</li>
<li>buildingANNK, the ANNK for labeling data as input, default 10, I64 </li>
</ul>
</dd>
<dd>
machine learning extra configs<ul>
<li>cudaBuild whether or not use cuda to build model, I64, default 0</li>
<li>learningRate the learning rate for training, Double, default 0.1</li>
<li>hiddenLayerDim the dimension of hidden layer, I64, default the same as output layer</li>
<li>MLTrainBatchSize the batch size of ML training, I64, default 128</li>
<li>MLTrainMargin the margin value in regulating variance used in training, Double, default 2.0</li>
<li>MLTrainEpochs the number of epochs in training, I64, default 30</li>
<li>positiveSampleRatio the ratio of positive samples during self-supervised learning, Double, default 0.1 (should be 0~1) </li>
</ul>
</dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ab24cba33125e368200449cfa4090019c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24cba33125e368200449cfa4090019c">&#9670;&nbsp;</a></span>loadInitialTensor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFL2HIndex::loadInitialTensor </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load the initial tensors of a data base, use this BEFORE <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a> </p>
<dl class="section note"><dt>Note</dt><dd>This is majorly an offline function, and may be different from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a> for some indexes </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the tensor, some index need to be single row </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the loading is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#af801592ccc0813c97a2ff45da40a1312">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="acde59c6130fd8544e0d6d42beca47eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acde59c6130fd8544e0d6d42beca47eec">&#9670;&nbsp;</a></span>loadInitialTensorAndQueryDistribution()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFL2HIndex::loadInitialTensorAndQueryDistribution </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>query</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load the initial tensors and query distributions of a data base, use this BEFORE <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a> </p>
<dl class="section note"><dt>Note</dt><dd>This is majorly an offline function, and may be different from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#a70846ac08b2e410fdd87026d251aff16">insertTensor</a> for some indexes </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the data tensor </td></tr>
    <tr><td class="paramname">query</td><td>the example query tensor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the loading is successful </dd></dl>

<p>Reimplemented from <a class="el" href="classCANDY_1_1AbstractIndex.html#a7b33be0f70010fdb579f47cac3f59f95">CANDY::AbstractIndex</a>.</p>

</div>
</div>
<a id="a1ad72dd1c11c05f254ec7ac6198c2852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ad72dd1c11c05f254ec7ac6198c2852">&#9670;&nbsp;</a></span>setConfig()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CANDY::OnlineIVFL2HIndex::setConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__INTELLI__UTIL__CONFIGS.html#gaeb9674f6f5860b687d73f618962dfcea">INTELLI::ConfigMapPtr</a>&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set the index-specific config related to one index </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>the config of this class </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool whether the configuration is successful </dd></dl>
<p>generate the rotation matrix for random projection</p>

<p>Reimplemented from <a class="el" href="classCANDY_1_1OnlineIVFLSHIndex.html#ae72ef6def73d5cc1177c4e2ea09ba1b8">CANDY::OnlineIVFLSHIndex</a>.</p>

</div>
</div>
<a id="ad559cbb013803dcccb2da202c1766ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad559cbb013803dcccb2da202c1766ad9">&#9670;&nbsp;</a></span>trainModelWithData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CANDY::OnlineIVFL2HIndex::trainModelWithData </td>
          <td>(</td>
          <td class="paramtype">torch::Tensor &amp;&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>self-supervised learning on data, including automatic labeling </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>the input tensor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/CANDY/<a class="el" href="OnlineIVFL2HIndex_8h_source.html">OnlineIVFL2HIndex.h</a></li>
<li>src/CANDY/<a class="el" href="OnlineIVFL2HIndex_8cpp.html">OnlineIVFL2HIndex.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>CANDY</b></li><li class="navelem"><a class="el" href="classCANDY_1_1OnlineIVFL2HIndex.html">OnlineIVFL2HIndex</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
